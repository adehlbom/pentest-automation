#!/bin/bash
TARGET_IP=$1
touch ports.txt
nmap -n -v -sT -A $TARGET_IP -oN initial_tcp_scan.txt
grep "discovered open port" initial_tcp_scan.txt | awk '{print $4}' | cut -d '/' -f1 | tr '\n' ',' | sed 's/,$//' > ports.txt
awk '/\/tcp|\/udp/ {print $1, $2, $3, $4, $5}' initial_tcp_scan.txt > processed_output.txt
